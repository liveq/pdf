<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- SEO Meta Tags -->
    <title>ë¬´ë£Œ PDF ë³€í™˜ ë„êµ¬ - JPEG ë³€í™˜ & PDF ë¶„í•  | pdf.baal.co.kr</title>
    <meta name="description" content="PDFë¥¼ ê³ í’ˆì§ˆ JPEG ì´ë¯¸ì§€ë¡œ ë³€í™˜í•˜ê±°ë‚˜ ì—¬ëŸ¬ íŒŒì¼ë¡œ ë¶„í• í•˜ì„¸ìš”. ë¬´ë£Œ, ë¹ ë¥´ê³  ì•ˆì „í•œ ë¸Œë¼ìš°ì € ê¸°ë°˜ PDF ë„êµ¬. 150/300 DPI ì§€ì›, ë°°ì¹˜ ì²˜ë¦¬, í˜ì´ì§€ ì„ íƒ ê¸°ëŠ¥ ì œê³µ.">
    <meta name="keywords" content="PDF to JPEG, PDF ë³€í™˜, PDF ë¶„í• , PDF ë‚˜ëˆ„ê¸°, ì˜¨ë¼ì¸ PDF ë„êµ¬, PDF to JPG, ë¬´ë£Œ PDF ë³€í™˜ê¸°, PDF í˜ì´ì§€ ë¶„ë¦¬, ê³ í™”ì§ˆ PDF ë³€í™˜, 150 DPI, 300 DPI">
    <meta name="author" content="baal.co.kr">
    <meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1">
    <link rel="canonical" href="https://pdf.baal.co.kr">
    <meta name="theme-color" content="#B8860B">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://pdf.baal.co.kr">
    <meta property="og:title" content="ë¬´ë£Œ PDF ë³€í™˜ ë„êµ¬ - JPEG ë³€í™˜ & PDF ë¶„í• ">
    <meta property="og:description" content="PDFë¥¼ ê³ í’ˆì§ˆ JPEGë¡œ ë³€í™˜í•˜ê±°ë‚˜ ì—¬ëŸ¬ íŒŒì¼ë¡œ ë¶„í• í•˜ì„¸ìš”. ë¬´ë£Œ, ë¹ ë¥´ê³  ì•ˆì „í•œ ë¸Œë¼ìš°ì € ê¸°ë°˜ ë„êµ¬. 150/300 DPI ì§€ì›, ë°°ì¹˜ ì²˜ë¦¬ ê°€ëŠ¥.">
    <meta property="og:site_name" content="PDF ë³€í™˜ ë„êµ¬">
    <meta property="og:locale" content="ko_KR">
    <meta property="og:image" content="https://pdf.baal.co.kr/og-image.jpg">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://pdf.baal.co.kr">
    <meta name="twitter:title" content="ë¬´ë£Œ PDF ë³€í™˜ ë„êµ¬ - JPEG ë³€í™˜ & PDF ë¶„í• ">
    <meta name="twitter:description" content="PDFë¥¼ ê³ í’ˆì§ˆ JPEGë¡œ ë³€í™˜í•˜ê±°ë‚˜ ì—¬ëŸ¬ íŒŒì¼ë¡œ ë¶„í• í•˜ì„¸ìš”. ë¬´ë£Œ, ë¹ ë¥´ê³  ì•ˆì „í•œ ë¸Œë¼ìš°ì € ê¸°ë°˜ ë„êµ¬.">
    <meta name="twitter:image" content="https://pdf.baal.co.kr/og-image.jpg">

    <!-- êµ¬ì¡°í™”ëœ ë°ì´í„° (JSON-LD) -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "PDF ë³€í™˜ ë„êµ¬",
      "alternateName": "PDF Converter Tool",
      "url": "https://pdf.baal.co.kr",
      "description": "PDF íŒŒì¼ì„ ê³ í’ˆì§ˆ JPEG ì´ë¯¸ì§€ë¡œ ë³€í™˜í•˜ê±°ë‚˜ ì—¬ëŸ¬ ê°œì˜ ì‘ì€ PDF íŒŒì¼ë¡œ ë¶„í• í•  ìˆ˜ ìˆëŠ” ë¬´ë£Œ ì˜¨ë¼ì¸ ë„êµ¬ì…ë‹ˆë‹¤.",
      "applicationCategory": "UtilityApplication",
      "operatingSystem": "Any",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "KRW"
      },
      "featureList": [
        "PDF to JPEG ë³€í™˜ (150/300 DPI)",
        "ë°°ì¹˜ ì²˜ë¦¬ (ìµœëŒ€ 3ê°œ íŒŒì¼)",
        "í˜ì´ì§€ ì„ íƒ (ì „ì²´/ë²”ìœ„/íŠ¹ì •)",
        "ê·¸ë ˆì´ìŠ¤ì¼€ì¼ ë³€í™˜",
        "PDF ë¶„í•  (ê· ë“±/í˜ì´ì§€/ë²”ìœ„)",
        "ë‹¤í¬ëª¨ë“œ ì§€ì›",
        "í•œêµ­ì–´/ì˜ì–´ ì§€ì›"
      ],
      "browserRequirements": "Requires JavaScript. Requires HTML5.",
      "author": {
        "@type": "Organization",
        "name": "baal.co.kr",
        "url": "https://baal.co.kr"
      }
    }
    </script>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;600;700&display=swap" rel="stylesheet">

    <!-- Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf-lib/1.17.1/pdf-lib.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>

    <style>
        :root {
            /* ë¼ì´íŠ¸ ëª¨ë“œ ìƒ‰ìƒ */
            --primary-white: #FFFFFF;
            --primary-black: #1A1A1A;
            --accent-gold: #B8860B;
            --text-dark: #333333;
            --text-light: #666666;
            --background-light: #F8F8F8;
            --border-light: #E0E0E0;
            --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);
            --shadow-md: 0 5px 15px rgba(0, 0, 0, 0.08);
            --shadow-lg: 0 10px 20px rgba(0, 0, 0, 0.1);
            --transition-base: 0.3s ease;
        }

        [data-theme="dark"] {
            /* ë‹¤í¬ ëª¨ë“œ ìƒ‰ìƒ */
            --primary-white: #1A1A1A;
            --primary-black: #FFFFFF;
            --accent-gold: #D4A017;
            --text-dark: #E0E0E0;
            --text-light: #B0B0B0;
            --background-light: #2A2A2A;
            --border-light: #404040;
            --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.3);
            --shadow-md: 0 5px 15px rgba(0, 0, 0, 0.4);
            --shadow-lg: 0 10px 20px rgba(0, 0, 0, 0.5);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Noto Sans KR', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            color: var(--text-dark);
            background: var(--primary-white);
            line-height: 1.6;
            min-height: 100vh;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            word-break: keep-all;
            transition: background var(--transition-base), color var(--transition-base);
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 40px 24px 80px;
            position: relative;
        }

        /* ìœ í‹¸ë¦¬í‹° ë²„íŠ¼ */
        .utility-buttons {
            position: absolute;
            top: 24px;
            right: 24px;
            display: flex;
            gap: 12px;
            z-index: 100;
        }

        .icon-btn {
            width: 44px;
            height: 44px;
            border-radius: 50%;
            border: 1px solid var(--border-light);
            background: var(--primary-white);
            color: var(--text-dark);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            transition: all var(--transition-base);
        }

        .icon-btn:hover {
            background: var(--accent-gold);
            color: var(--primary-white);
            border-color: var(--accent-gold);
            transform: translateY(-2px);
        }

        /* í—¤ë” */
        .header {
            text-align: center;
            margin-bottom: 48px;
            margin-top: 40px;
            animation: fadeInUp 0.8s ease;
        }

        .header h1 {
            font-size: 42px;
            font-weight: 700;
            color: var(--primary-black);
            margin-bottom: 12px;
            letter-spacing: -1px;
            line-height: 1.2;
        }

        .header p {
            font-size: 16px;
            color: var(--text-light);
            line-height: 1.6;
        }

        /* íƒ­ ë„¤ë¹„ê²Œì´ì…˜ */
        .tab-navigation {
            display: flex;
            justify-content: center;
            gap: 16px;
            margin-bottom: 48px;
            animation: fadeInUp 0.8s ease 0.1s both;
        }

        .tab-btn {
            padding: 12px 32px;
            border: 2px solid var(--border-light);
            background: var(--primary-white);
            color: var(--text-dark);
            font-size: 16px;
            font-weight: 600;
            border-radius: 50px;
            cursor: pointer;
            transition: all var(--transition-base);
            font-family: 'Noto Sans KR', sans-serif;
        }

        .tab-btn:hover {
            border-color: var(--accent-gold);
            color: var(--accent-gold);
        }

        .tab-btn.active {
            background: var(--accent-gold);
            color: var(--primary-white);
            border-color: var(--accent-gold);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* ì—…ë¡œë“œ ì˜ì—­ */
        .upload-area {
            background: var(--background-light);
            border: 2px dashed var(--border-light);
            border-radius: 12px;
            padding: 60px 40px;
            text-align: center;
            cursor: pointer;
            transition: all var(--transition-base);
            margin-bottom: 32px;
            animation: fadeInUp 0.8s ease 0.2s both;
        }

        .upload-area:hover, .upload-area.drag-over {
            border-color: var(--accent-gold);
            background: var(--primary-white);
            box-shadow: var(--shadow-md);
            transform: scale(1.01);
        }

        .upload-area h3 {
            font-size: 18px;
            font-weight: 600;
            color: var(--text-dark);
            margin-bottom: 8px;
        }

        .upload-area p {
            font-size: 14px;
            color: var(--text-light);
        }

        .file-input {
            display: none;
        }

        /* íŒŒì¼ ë¦¬ìŠ¤íŠ¸ */
        .file-list {
            margin-bottom: 32px;
        }

        .file-item {
            background: var(--primary-white);
            border: 1px solid var(--border-light);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            animation: fadeInUp 0.3s ease;
        }

        .file-info h4 {
            font-size: 16px;
            font-weight: 600;
            color: var(--text-dark);
            margin-bottom: 4px;
        }

        .file-info p {
            font-size: 14px;
            color: var(--text-light);
        }

        .file-remove {
            background: none;
            border: none;
            color: var(--text-light);
            cursor: pointer;
            font-size: 20px;
            padding: 4px 8px;
            transition: color var(--transition-base);
        }

        .file-remove:hover {
            color: #ef4444;
        }

        /* ì˜µì…˜ */
        .options {
            background: var(--primary-white);
            border: 1px solid var(--border-light);
            border-radius: 12px;
            padding: 32px;
            margin-bottom: 32px;
            animation: fadeInUp 0.8s ease 0.3s both;
        }

        .option-group {
            margin-bottom: 24px;
        }

        .option-group:last-child {
            margin-bottom: 0;
        }

        .option-group label {
            display: block;
            font-weight: 600;
            font-size: 15px;
            margin-bottom: 12px;
            color: var(--text-dark);
        }

        .radio-group {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .radio-option {
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
        }

        .radio-option input[type="radio"] {
            width: 18px;
            height: 18px;
            cursor: pointer;
        }

        .radio-option label {
            margin: 0;
            font-weight: 400;
            cursor: pointer;
        }

        .page-input {
            padding: 10px 12px;
            border: 1px solid var(--border-light);
            border-radius: 8px;
            font-size: 14px;
            font-family: 'Noto Sans KR', sans-serif;
            background: var(--primary-white);
            color: var(--text-dark);
            width: 100%;
            margin-top: 8px;
            transition: border-color var(--transition-base);
        }

        .page-input:focus {
            outline: none;
            border-color: var(--accent-gold);
        }

        .page-input:disabled {
            background: var(--background-light);
            cursor: not-allowed;
        }

        .hint-text {
            font-size: 13px;
            color: var(--text-light);
            margin-top: 6px;
        }

        .checkbox-option {
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            position: relative;
        }

        .checkbox-option input[type="checkbox"] {
            width: 18px;
            height: 18px;
            cursor: pointer;
        }

        .help-icon {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: var(--text-light);
            color: var(--primary-white);
            font-size: 11px;
            font-weight: bold;
            cursor: help;
            position: relative;
            margin-left: 6px;
            transition: all var(--transition-base);
            flex-shrink: 0;
        }

        .help-icon:hover {
            background: var(--accent-gold);
            transform: scale(1.1);
        }

        .help-icon::after {
            content: attr(data-tooltip);
            position: absolute;
            bottom: calc(100% + 10px);
            left: 50%;
            transform: translateX(-50%);
            padding: 12px 16px;
            background: var(--primary-black);
            color: var(--primary-white);
            font-size: 13px;
            line-height: 1.5;
            white-space: pre-line;
            border-radius: 8px;
            box-shadow: var(--shadow-lg);
            opacity: 0;
            visibility: hidden;
            transition: all var(--transition-base);
            pointer-events: none;
            z-index: 10000;
            min-width: 200px;
            max-width: 300px;
            text-align: left;
        }

        .help-icon:hover::after {
            opacity: 1;
            visibility: visible;
        }

        .help-icon::before {
            content: '';
            position: absolute;
            bottom: calc(100% + 4px);
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 0;
            border-left: 6px solid transparent;
            border-right: 6px solid transparent;
            border-top: 6px solid var(--primary-black);
            opacity: 0;
            visibility: hidden;
            transition: all var(--transition-base);
            z-index: 10000;
        }

        .help-icon:hover::before {
            opacity: 1;
            visibility: visible;
        }

        .option-label-with-help {
            display: flex;
            align-items: center;
        }

        /* ë²„íŠ¼ */
        .btn {
            width: 100%;
            padding: 16px 32px;
            border: none;
            border-radius: 50px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all var(--transition-base);
            font-family: 'Noto Sans KR', sans-serif;
        }

        .btn-primary {
            background: var(--accent-gold);
            color: var(--primary-white);
        }

        .btn-primary:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .btn-secondary {
            background: var(--primary-black);
            color: var(--primary-white);
            margin-top: 12px;
        }

        .btn-secondary:hover:not(:disabled) {
            background: var(--text-dark);
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        /* ì§„í–‰ë¥  */
        .progress-container {
            margin-top: 24px;
        }

        .progress-item {
            margin-bottom: 16px;
        }

        .progress-item:last-child {
            margin-bottom: 0;
        }

        .progress-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .progress-filename {
            font-size: 14px;
            font-weight: 600;
            color: var(--text-dark);
        }

        .progress-status {
            font-size: 13px;
            color: var(--text-light);
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: var(--border-light);
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: var(--accent-gold);
            transition: width var(--transition-base);
            border-radius: 4px;
        }

        /* Toast ì•Œë¦¼ */
        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 10000;
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 16px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 24px rgba(0, 0, 0, 0.15);
            border-left: 4px solid;
            min-width: 300px;
            max-width: 400px;
            animation: slideIn 0.3s ease-out;
        }

        .toast-success {
            border-left-color: #10b981;
            background: linear-gradient(135deg, #f0fdf4 0%, #ecfdf5 100%);
        }

        .toast-error {
            border-left-color: #ef4444;
            background: linear-gradient(135deg, #fef2f2 0%, #fee2e2 100%);
        }

        .toast-warning {
            border-left-color: #f59e0b;
            background: linear-gradient(135deg, #fffbeb 0%, #fef3c7 100%);
        }

        .toast-message {
            flex: 1;
            font-size: 14px;
            font-weight: 500;
            color: #374151;
            line-height: 1.4;
        }

        .toast-close {
            background: none;
            border: none;
            font-size: 18px;
            color: #9ca3af;
            cursor: pointer;
            padding: 0;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* ëª¨ë‹¬ */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: 9999;
            display: flex;
            align-items: center;
            justify-content: center;
            animation: fadeIn 0.3s ease;
        }

        .modal {
            background: var(--primary-white);
            border-radius: 16px;
            padding: 32px;
            max-width: 500px;
            width: 90%;
            box-shadow: var(--shadow-lg);
            animation: scaleIn 0.3s ease;
        }

        .modal h2 {
            font-size: 24px;
            font-weight: 700;
            color: var(--primary-black);
            margin-bottom: 16px;
        }

        .modal p {
            font-size: 15px;
            color: var(--text-dark);
            line-height: 1.6;
            margin-bottom: 24px;
        }

        .modal-buttons {
            display: flex;
            gap: 12px;
        }

        .modal-btn {
            flex: 1;
            padding: 12px 24px;
            border: none;
            border-radius: 50px;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: all var(--transition-base);
            font-family: 'Noto Sans KR', sans-serif;
        }

        .modal-btn-primary {
            background: var(--accent-gold);
            color: var(--primary-white);
        }

        .modal-btn-secondary {
            background: var(--background-light);
            color: var(--text-dark);
        }

        .modal-btn:hover {
            transform: translateY(-2px);
        }

        /* ì• ë‹ˆë©”ì´ì…˜ */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes scaleIn {
            from {
                opacity: 0;
                transform: scale(0.9);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        .pulse {
            animation: pulse 1.5s infinite;
        }

        .hidden {
            display: none !important;
        }

        /* ë°˜ì‘í˜• */
        @media (max-width: 768px) {
            .container {
                padding: 30px 20px 60px;
            }

            .utility-buttons {
                top: 16px;
                right: 16px;
            }

            .header h1 {
                font-size: 32px;
            }

            .header p {
                font-size: 14px;
            }

            .tab-navigation {
                gap: 8px;
            }

            .tab-btn {
                padding: 10px 20px;
                font-size: 14px;
            }

            .upload-area {
                padding: 40px 20px;
            }

            .options {
                padding: 24px;
            }

            .toast {
                left: 20px;
                right: 20px;
                min-width: auto;
                max-width: none;
            }

            .modal {
                padding: 24px;
            }

            .modal-buttons {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- ìœ í‹¸ë¦¬í‹° ë²„íŠ¼ -->
        <div class="utility-buttons">
            <button class="icon-btn" id="langToggle" title="Language / ì–¸ì–´">ğŸŒ</button>
            <button class="icon-btn" id="themeToggle" title="Dark Mode / ë‹¤í¬ ëª¨ë“œ">ğŸŒ™</button>
        </div>

        <!-- í—¤ë” -->
        <div class="header">
            <h1 data-ko="PDF ë³€í™˜ ë„êµ¬" data-en="PDF Converter Tool">PDF ë³€í™˜ ë„êµ¬</h1>
            <p data-ko="PDFë¥¼ JPEGë¡œ ë³€í™˜í•˜ê±°ë‚˜ ì—¬ëŸ¬ íŒŒì¼ë¡œ ë¶„í• í•˜ì„¸ìš”" data-en="Convert PDF to JPEG or split into multiple files">PDFë¥¼ JPEGë¡œ ë³€í™˜í•˜ê±°ë‚˜ ì—¬ëŸ¬ íŒŒì¼ë¡œ ë¶„í• í•˜ì„¸ìš”</p>
        </div>

        <!-- íƒ­ ë„¤ë¹„ê²Œì´ì…˜ -->
        <div class="tab-navigation">
            <button class="tab-btn active" data-tab="jpeg" data-ko="PDF â†’ JPEG" data-en="PDF â†’ JPEG">PDF â†’ JPEG</button>
            <button class="tab-btn" data-tab="split" data-ko="PDF ë¶„í• " data-en="PDF Split">PDF ë¶„í• </button>
        </div>

        <!-- PDF to JPEG íƒ­ -->
        <div id="jpeg-tab" class="tab-content active">
            <div class="upload-area" id="jpegUploadArea">
                <input type="file" id="jpegFileInput" class="file-input" accept=".pdf" multiple>
                <h3 data-ko="PDF íŒŒì¼ ì„ íƒ" data-en="Select PDF Files">PDF íŒŒì¼ ì„ íƒ</h3>
                <p data-ko="í´ë¦­í•˜ê±°ë‚˜ ë“œë˜ê·¸í•˜ì—¬ PDF íŒŒì¼ ì—…ë¡œë“œ (ìµœëŒ€ 3ê°œ, 20MB ì´í•˜)" data-en="Click or drag to upload PDF files (max 3 files, 20MB each)">í´ë¦­í•˜ê±°ë‚˜ ë“œë˜ê·¸í•˜ì—¬ PDF íŒŒì¼ ì—…ë¡œë“œ (ìµœëŒ€ 3ê°œ, 20MB ì´í•˜)</p>
            </div>

            <div id="jpegFileList" class="file-list hidden"></div>

            <div id="jpegOptions" class="options hidden">
                <!-- í˜ì´ì§€ ì„ íƒ -->
                <div class="option-group">
                    <label data-ko="í˜ì´ì§€ ì„ íƒ (íƒ1)" data-en="Page Selection">í˜ì´ì§€ ì„ íƒ (íƒ1)</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="allPages" name="pageSelection" value="all" checked>
                            <div class="option-label-with-help">
                                <label for="allPages" data-ko="ì „ì²´ í˜ì´ì§€" data-en="All Pages">ì „ì²´ í˜ì´ì§€</label>
                                <span class="help-icon" data-tooltip="PDFì˜ ëª¨ë“  í˜ì´ì§€ë¥¼ JPEGë¡œ ë³€í™˜í•©ë‹ˆë‹¤.&#10;&#10;ì˜ˆ: 100í˜ì´ì§€ PDF â†’ 100ê°œ ì´ë¯¸ì§€">â“˜</span>
                            </div>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="pageRange" name="pageSelection" value="range">
                            <div class="option-label-with-help">
                                <label for="pageRange" data-ko="í˜ì´ì§€ ë²”ìœ„" data-en="Page Range">í˜ì´ì§€ ë²”ìœ„</label>
                                <span class="help-icon" data-tooltip="ì‹œì‘ í˜ì´ì§€ë¶€í„° ë í˜ì´ì§€ê¹Œì§€ ë³€í™˜í•©ë‹ˆë‹¤.&#10;&#10;ì˜ˆ: 3-5 ì…ë ¥ ì‹œ â†’ 3, 4, 5 í˜ì´ì§€ë§Œ ë³€í™˜">â“˜</span>
                            </div>
                            <input type="text" id="rangeInput" class="page-input" placeholder="3-5" disabled>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="specificPages" name="pageSelection" value="specific">
                            <div class="option-label-with-help">
                                <label for="specificPages" data-ko="íŠ¹ì • í˜ì´ì§€" data-en="Specific Pages">íŠ¹ì • í˜ì´ì§€</label>
                                <span class="help-icon" data-tooltip="ì›í•˜ëŠ” í˜ì´ì§€ë§Œ ì„ íƒí•´ì„œ ë³€í™˜í•©ë‹ˆë‹¤.&#10;&#10;ì‰¼í‘œ(,)ë¡œ í˜ì´ì§€ êµ¬ë¶„&#10;í•˜ì´í”ˆ(-)ìœ¼ë¡œ ë²”ìœ„ ì§€ì •&#10;&#10;ì˜ˆ: 1,3,5-8 ì…ë ¥ ì‹œ&#10;â†’ 1, 3, 5, 6, 7, 8 í˜ì´ì§€ ë³€í™˜">â“˜</span>
                            </div>
                            <input type="text" id="specificInput" class="page-input" placeholder="1,3,5-8" disabled>
                        </div>
                    </div>
                    <p class="hint-text" data-ko="í˜ì´ì§€ êµ¬ë¶„ì€ ì‰¼í‘œ(,)ì™€ í•˜ì´í”ˆ(-)ìœ¼ë¡œ í•˜ì„¸ìš”. ì˜ˆ: 1,3,5-8" data-en="Use comma(,) and hyphen(-) to separate pages. Example: 1,3,5-8">í˜ì´ì§€ êµ¬ë¶„ì€ ì‰¼í‘œ(,)ì™€ í•˜ì´í”ˆ(-)ìœ¼ë¡œ í•˜ì„¸ìš”. ì˜ˆ: 1,3,5-8</p>
                </div>

                <!-- í’ˆì§ˆ ì˜µì…˜ -->
                <div class="option-group">
                    <label data-ko="í’ˆì§ˆ ì„ íƒ" data-en="Quality">í’ˆì§ˆ ì„ íƒ</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="mediumQuality" name="quality" value="150">
                            <div class="option-label-with-help">
                                <label for="mediumQuality" data-ko="ì¤‘ê°„ í’ˆì§ˆ (150 DPI)" data-en="Medium Quality (150 DPI)">ì¤‘ê°„ í’ˆì§ˆ (150 DPI)</label>
                                <span class="help-icon" data-tooltip="ì›¹ ì‚¬ì´íŠ¸ë‚˜ í™”ë©´ ë³´ê¸°ìš©ìœ¼ë¡œ ì í•©í•©ë‹ˆë‹¤.&#10;&#10;íŒŒì¼ í¬ê¸°ê°€ ì‘ê³  ì²˜ë¦¬ ì†ë„ê°€ ë¹ ë¦…ë‹ˆë‹¤.&#10;&#10;ê¶Œì¥: ì›¹ ì—…ë¡œë“œ, SNS ê³µìœ ìš©">â“˜</span>
                            </div>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="highQuality" name="quality" value="300" checked>
                            <div class="option-label-with-help">
                                <label for="highQuality" data-ko="ê³ í’ˆì§ˆ (300 DPI)" data-en="High Quality (300 DPI)">ê³ í’ˆì§ˆ (300 DPI)</label>
                                <span class="help-icon" data-tooltip="ì¸ì‡„ìš©ìœ¼ë¡œ ì í•©í•œ ê³ í’ˆì§ˆ ì´ë¯¸ì§€ì…ë‹ˆë‹¤.&#10;&#10;ì„ ëª…í•˜ê³  ê¹¨ë—í•œ ê²°ê³¼ë¬¼ì„ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.&#10;&#10;ê¶Œì¥: ì¸ì‡„, ë¬¸ì„œ ë³´ê´€ìš©">â“˜</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ê·¸ë ˆì´ìŠ¤ì¼€ì¼ ì˜µì…˜ -->
                <div class="option-group">
                    <div class="checkbox-option">
                        <input type="checkbox" id="grayscale">
                        <div class="option-label-with-help">
                            <label for="grayscale" data-ko="ê·¸ë ˆì´ìŠ¤ì¼€ì¼ (í‘ë°±)" data-en="Grayscale">ê·¸ë ˆì´ìŠ¤ì¼€ì¼ (í‘ë°±)</label>
                            <span class="help-icon" data-tooltip="ì»¬ëŸ¬ë¥¼ í‘ë°±ìœ¼ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.&#10;&#10;âœ“ íŒŒì¼ í¬ê¸° 30-50% ê°ì†Œ&#10;âœ“ í‘ë°± ì¸ì‡„ ì‹œ ì‰í¬ ì ˆì•½&#10;âœ“ ë¬¸ì„œ ë³´ê´€ìš©ìœ¼ë¡œ ì í•©">â“˜</span>
                        </div>
                    </div>
                </div>

                <button class="btn btn-primary" id="convertBtn" data-ko="JPEGë¡œ ë³€í™˜" data-en="Convert to JPEG">JPEGë¡œ ë³€í™˜</button>
                <button class="btn btn-secondary hidden" id="cancelConvertBtn" data-ko="ë³€í™˜ ì·¨ì†Œ" data-en="Cancel">ë³€í™˜ ì·¨ì†Œ</button>

                <div id="jpegProgress" class="progress-container hidden"></div>
            </div>
        </div>

        <!-- PDF Split íƒ­ -->
        <div id="split-tab" class="tab-content">
            <div class="upload-area" id="splitUploadArea">
                <input type="file" id="splitFileInput" class="file-input" accept=".pdf">
                <h3 data-ko="PDF íŒŒì¼ ì„ íƒ" data-en="Select PDF File">PDF íŒŒì¼ ì„ íƒ</h3>
                <p data-ko="í´ë¦­í•˜ê±°ë‚˜ ë“œë˜ê·¸í•˜ì—¬ PDF íŒŒì¼ ì—…ë¡œë“œ (20MB ì´í•˜)" data-en="Click or drag to upload PDF file (max 20MB)">í´ë¦­í•˜ê±°ë‚˜ ë“œë˜ê·¸í•˜ì—¬ PDF íŒŒì¼ ì—…ë¡œë“œ (20MB ì´í•˜)</p>
            </div>

            <div id="splitFileInfo" class="file-list hidden"></div>

            <div id="splitOptions" class="options hidden">
                <div class="option-group">
                    <label data-ko="ë¶„í•  ë°©ì‹ (íƒ1)" data-en="Split Method">ë¶„í•  ë°©ì‹ (íƒ1)</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="splitEqual" name="splitMethod" value="equal" checked>
                            <div class="option-label-with-help">
                                <label for="splitEqual" data-ko="ê· ë“± ë¶„í• " data-en="Equal Division">ê· ë“± ë¶„í• </label>
                                <span class="help-icon" data-tooltip="ì „ì²´ PDFë¥¼ ê°™ì€ í¬ê¸°ë¡œ ë‚˜ëˆ•ë‹ˆë‹¤.&#10;&#10;ì˜ˆ: 100í˜ì´ì§€ë¥¼ 2ê°œë¡œ ë¶„í• &#10;â†’ 50í˜ì´ì§€ + 50í˜ì´ì§€&#10;&#10;ì˜ˆ: 100í˜ì´ì§€ë¥¼ 3ê°œë¡œ ë¶„í• &#10;â†’ 34í˜ì´ì§€ + 33í˜ì´ì§€ + 33í˜ì´ì§€">â“˜</span>
                            </div>
                            <input type="number" id="equalParts" class="page-input" min="2" max="100" value="2" placeholder="ë¶„í• í•  ê°œìˆ˜">
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="splitByPages" name="splitMethod" value="pages">
                            <div class="option-label-with-help">
                                <label for="splitByPages" data-ko="ë§¤ Ní˜ì´ì§€ë§ˆë‹¤" data-en="Every N Pages">ë§¤ Ní˜ì´ì§€ë§ˆë‹¤</label>
                                <span class="help-icon" data-tooltip="ì§€ì •í•œ í˜ì´ì§€ ìˆ˜ë§ˆë‹¤ íŒŒì¼ì„ ë‚˜ëˆ•ë‹ˆë‹¤.&#10;&#10;ì˜ˆ: 10í˜ì´ì§€ë§ˆë‹¤ ë¶„í• &#10;100í˜ì´ì§€ PDF&#10;â†’ 1-10, 11-20, ... (ì´ 10ê°œ íŒŒì¼)&#10;&#10;ì˜ˆ: 25í˜ì´ì§€ë§ˆë‹¤ ë¶„í• &#10;100í˜ì´ì§€ PDF&#10;â†’ 1-25, 26-50, 51-75, 76-100">â“˜</span>
                            </div>
                            <input type="number" id="pagesPerSplit" class="page-input" min="1" max="100" value="10" placeholder="í˜ì´ì§€ ìˆ˜" disabled>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="splitRange" name="splitMethod" value="range">
                            <div class="option-label-with-help">
                                <label for="splitRange" data-ko="í˜ì´ì§€ ë²”ìœ„" data-en="Page Ranges">í˜ì´ì§€ ë²”ìœ„</label>
                                <span class="help-icon" data-tooltip="ì›í•˜ëŠ” í˜ì´ì§€ ë²”ìœ„ë§Œ ì¶”ì¶œí•©ë‹ˆë‹¤.&#10;&#10;ì‰¼í‘œ(,)ë¡œ ë²”ìœ„ êµ¬ë¶„&#10;í•˜ì´í”ˆ(-)ìœ¼ë¡œ ë²”ìœ„ ì§€ì •&#10;&#10;ì˜ˆ: 1-10, 11-20 ì…ë ¥ ì‹œ&#10;â†’ 1-10í˜ì´ì§€ íŒŒì¼ 1ê°œ&#10;â†’ 11-20í˜ì´ì§€ íŒŒì¼ 1ê°œ&#10;(ì´ 2ê°œ íŒŒì¼ ìƒì„±)">â“˜</span>
                            </div>
                            <input type="text" id="splitRanges" class="page-input" placeholder="1-10, 11-20" disabled>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="splitAll" name="splitMethod" value="all">
                            <div class="option-label-with-help">
                                <label for="splitAll" data-ko="ëª¨ë“  í˜ì´ì§€ ë¶„ë¦¬" data-en="Split All Pages">ëª¨ë“  í˜ì´ì§€ ë¶„ë¦¬</label>
                                <span class="help-icon" data-tooltip="ê° í˜ì´ì§€ë¥¼ ê°œë³„ PDF íŒŒì¼ë¡œ ë¶„ë¦¬í•©ë‹ˆë‹¤.&#10;&#10;ì˜ˆ: 100í˜ì´ì§€ PDF&#10;â†’ 1í˜ì´ì§€ íŒŒì¼ 100ê°œ ìƒì„±&#10;&#10;ì£¼ì˜: í˜ì´ì§€ê°€ ë§ìœ¼ë©´ ì‹œê°„ì´ ê±¸ë¦½ë‹ˆë‹¤.">â“˜</span>
                            </div>
                        </div>
                    </div>
                </div>

                <button class="btn btn-primary" id="splitBtn" data-ko="PDF ë¶„í• í•˜ê¸°" data-en="Split PDF">PDF ë¶„í• í•˜ê¸°</button>
                <button class="btn btn-secondary hidden" id="cancelSplitBtn" data-ko="ë¶„í•  ì·¨ì†Œ" data-en="Cancel">ë¶„í•  ì·¨ì†Œ</button>

                <div id="splitProgress" class="progress-container hidden"></div>
            </div>
        </div>
    </div>

    <script>
        // PDF.js worker ì„¤ì •
        pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';

        // ì „ì—­ ë³€ìˆ˜
        let currentLang = 'ko';
        let currentTheme = 'light';
        let jpegFiles = [];
        let splitFile = null;
        let isProcessing = false;

        // ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', () => {
            initializeApp();
        });

        function initializeApp() {
            // ì‹œìŠ¤í…œ ì„¤ì • ê°ì§€
            if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
                currentTheme = 'dark';
                document.documentElement.setAttribute('data-theme', 'dark');
                document.getElementById('themeToggle').textContent = 'â˜€ï¸';
            }

            // ë¸Œë¼ìš°ì € ì–¸ì–´ ê°ì§€
            const browserLang = navigator.language || navigator.userLanguage;
            if (browserLang && !browserLang.startsWith('ko')) {
                toggleLanguage();
            }

            setupEventListeners();
        }

        function setupEventListeners() {
            // ìœ í‹¸ë¦¬í‹° ë²„íŠ¼
            document.getElementById('langToggle').addEventListener('click', toggleLanguage);
            document.getElementById('themeToggle').addEventListener('click', toggleTheme);

            // íƒ­ ë²„íŠ¼
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.addEventListener('click', () => switchTab(btn.dataset.tab));
            });

            // JPEG íƒ­
            setupJpegTab();

            // Split íƒ­
            setupSplitTab();
        }

        // ì–¸ì–´ ì „í™˜
        function toggleLanguage() {
            currentLang = currentLang === 'ko' ? 'en' : 'ko';
            document.querySelectorAll('[data-ko]').forEach(el => {
                el.textContent = el.getAttribute('data-' + currentLang);
            });
            document.documentElement.setAttribute('lang', currentLang);
        }

        // ë‹¤í¬ëª¨ë“œ ì „í™˜
        function toggleTheme() {
            currentTheme = currentTheme === 'light' ? 'dark' : 'light';
            document.documentElement.setAttribute('data-theme', currentTheme);
            document.getElementById('themeToggle').textContent = currentTheme === 'light' ? 'ğŸŒ™' : 'â˜€ï¸';
        }

        // íƒ­ ì „í™˜
        function switchTab(tab) {
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.toggle('active', btn.dataset.tab === tab);
            });
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.toggle('active', content.id === `${tab}-tab`);
            });
        }

        // Toast ì•Œë¦¼
        function showToast(message, type = 'success') {
            const toast = document.createElement('div');
            toast.className = `toast toast-${type}`;
            toast.innerHTML = `
                <div class="toast-message">${message}</div>
                <button class="toast-close">Ã—</button>
            `;

            document.body.appendChild(toast);

            toast.querySelector('.toast-close').addEventListener('click', () => {
                toast.remove();
            });

            setTimeout(() => {
                toast.remove();
            }, 5000);
        }

        // ëª¨ë‹¬ í‘œì‹œ
        function showModal(title, message, onConfirm, onCancel) {
            const overlay = document.createElement('div');
            overlay.className = 'modal-overlay';
            overlay.innerHTML = `
                <div class="modal">
                    <h2>${title}</h2>
                    <p>${message}</p>
                    <div class="modal-buttons">
                        <button class="modal-btn modal-btn-secondary" data-action="cancel">${currentLang === 'ko' ? 'ì·¨ì†Œí•˜ê¸°' : 'Cancel'}</button>
                        <button class="modal-btn modal-btn-primary pulse" data-action="confirm">${currentLang === 'ko' ? 'PDF ë¶„í• í•˜ê¸°' : 'Split PDF'}</button>
                    </div>
                </div>
            `;

            document.body.appendChild(overlay);

            overlay.querySelector('[data-action="cancel"]').addEventListener('click', () => {
                overlay.remove();
                if (onCancel) onCancel();
            });

            overlay.querySelector('[data-action="confirm"]').addEventListener('click', () => {
                overlay.remove();
                if (onConfirm) onConfirm();
            });
        }

        // íŒŒì¼ í¬ê¸° í¬ë§·
        function formatBytes(bytes) {
            if (bytes < 1024) return bytes + ' B';
            if (bytes < 1024 * 1024) return (bytes / 1024).toFixed(2) + ' KB';
            return (bytes / (1024 * 1024)).toFixed(2) + ' MB';
        }

        // ì•ˆì „í•œ íŒŒì¼ëª… ìƒì„±
        function sanitizeFilename(filename) {
            // í™•ì¥ì ì œê±°
            const name = filename.replace(/\.[^/.]+$/, '');

            // ì•ˆì „í•œ ë¬¸ìë§Œ ë‚¨ê¹€: A-Z, a-z, 0-9, -, _
            let sanitized = name.replace(/[^a-zA-Z0-9ê°€-í£\-_]/g, '_');

            // ì—°ì†ëœ ì–¸ë”ìŠ¤ì½”ì–´ ì œê±°
            sanitized = sanitized.replace(/_+/g, '_');

            // ì•ë’¤ ì–¸ë”ìŠ¤ì½”ì–´ ì œê±°
            sanitized = sanitized.replace(/^_+|_+$/g, '');

            // ë¹ˆ ë¬¸ìì—´ì´ë©´ 'output' ë°˜í™˜
            return sanitized || 'output';
        }

        // ë‚ ì§œ/ì‹œê°„ í¬ë§· (YYYYMMDDHHmm)
        function getTimestamp() {
            const now = new Date();
            const year = now.getFullYear();
            const month = String(now.getMonth() + 1).padStart(2, '0');
            const day = String(now.getDate()).padStart(2, '0');
            const hours = String(now.getHours()).padStart(2, '0');
            const minutes = String(now.getMinutes()).padStart(2, '0');
            return `${year}${month}${day}${hours}${minutes}`;
        }

        // JPEG íƒ­ ì„¤ì •
        function setupJpegTab() {
            const uploadArea = document.getElementById('jpegUploadArea');
            const fileInput = document.getElementById('jpegFileInput');
            const fileList = document.getElementById('jpegFileList');
            const options = document.getElementById('jpegOptions');
            const convertBtn = document.getElementById('convertBtn');
            const cancelBtn = document.getElementById('cancelConvertBtn');

            // ì—…ë¡œë“œ ì˜ì—­ í´ë¦­
            uploadArea.addEventListener('click', () => fileInput.click());

            // ë“œë˜ê·¸ ì•¤ ë“œë¡­
            uploadArea.addEventListener('dragover', (e) => {
                e.preventDefault();
                uploadArea.classList.add('drag-over');
            });

            uploadArea.addEventListener('dragleave', () => {
                uploadArea.classList.remove('drag-over');
            });

            uploadArea.addEventListener('drop', (e) => {
                e.preventDefault();
                uploadArea.classList.remove('drag-over');
                handleJpegFiles(Array.from(e.dataTransfer.files));
            });

            // íŒŒì¼ ì„ íƒ
            fileInput.addEventListener('change', (e) => {
                handleJpegFiles(Array.from(e.target.files));
            });

            // í˜ì´ì§€ ì„ íƒ ë¼ë””ì˜¤ ë²„íŠ¼
            document.querySelectorAll('input[name="pageSelection"]').forEach(radio => {
                radio.addEventListener('change', () => {
                    document.getElementById('rangeInput').disabled = radio.value !== 'range';
                    document.getElementById('specificInput').disabled = radio.value !== 'specific';
                });
            });

            // ë³€í™˜ ë²„íŠ¼
            convertBtn.addEventListener('click', convertToJpeg);
            cancelBtn.addEventListener('click', cancelConversion);
        }

        function handleJpegFiles(files) {
            const pdfFiles = files.filter(f => f.type === 'application/pdf');

            if (pdfFiles.length === 0) {
                showToast(currentLang === 'ko' ? 'PDF íŒŒì¼ë§Œ ì—…ë¡œë“œ ê°€ëŠ¥í•©ë‹ˆë‹¤.' : 'Only PDF files are allowed.', 'error');
                return;
            }

            // ìµœëŒ€ 3ê°œ ì œí•œ
            const totalFiles = jpegFiles.length + pdfFiles.length;
            if (totalFiles > 3) {
                showToast(currentLang === 'ko' ? 'ìµœëŒ€ 3ê°œê¹Œì§€ë§Œ ì—…ë¡œë“œ ê°€ëŠ¥í•©ë‹ˆë‹¤.' : 'Maximum 3 files allowed.', 'error');
                return;
            }

            // íŒŒì¼ í¬ê¸° ì²´í¬ (20MB)
            for (const file of pdfFiles) {
                if (file.size > 20 * 1024 * 1024) {
                    showToast(currentLang === 'ko' ? `${file.name}ì˜ í¬ê¸°ê°€ 20MBë¥¼ ì´ˆê³¼í•©ë‹ˆë‹¤.` : `${file.name} exceeds 20MB.`, 'error');
                    return;
                }
            }

            jpegFiles.push(...pdfFiles);
            displayJpegFiles();
        }

        function displayJpegFiles() {
            const fileList = document.getElementById('jpegFileList');
            const options = document.getElementById('jpegOptions');

            if (jpegFiles.length === 0) {
                fileList.classList.add('hidden');
                options.classList.add('hidden');
                return;
            }

            fileList.classList.remove('hidden');
            options.classList.remove('hidden');

            fileList.innerHTML = jpegFiles.map((file, index) => `
                <div class="file-item">
                    <div class="file-info">
                        <h4>${file.name}</h4>
                        <p>${formatBytes(file.size)}</p>
                    </div>
                    <button class="file-remove" onclick="removeJpegFile(${index})">Ã—</button>
                </div>
            `).join('');
        }

        function removeJpegFile(index) {
            jpegFiles.splice(index, 1);
            displayJpegFiles();
        }

        async function convertToJpeg() {
            if (isProcessing || jpegFiles.length === 0) return;

            isProcessing = true;
            document.getElementById('convertBtn').disabled = true;
            document.getElementById('cancelConvertBtn').classList.remove('hidden');

            const progressContainer = document.getElementById('jpegProgress');
            progressContainer.classList.remove('hidden');
            progressContainer.innerHTML = '';

            // ì„¤ì • ê°€ì ¸ì˜¤ê¸°
            const pageSelection = document.querySelector('input[name="pageSelection"]:checked').value;
            const quality = parseInt(document.querySelector('input[name="quality"]:checked').value);
            const grayscale = document.getElementById('grayscale').checked;

            const scale = quality / 72; // DPI to scale

            let allResults = [];

            for (let fileIndex = 0; fileIndex < jpegFiles.length; fileIndex++) {
                const file = jpegFiles[fileIndex];

                // ì§„í–‰ë¥  ì•„ì´í…œ ìƒì„±
                const progressItem = document.createElement('div');
                progressItem.className = 'progress-item';
                progressItem.innerHTML = `
                    <div class="progress-header">
                        <span class="progress-filename">${file.name}</span>
                        <span class="progress-status" data-status="${fileIndex}">0%</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" data-progress="${fileIndex}" style="width: 0%"></div>
                    </div>
                `;
                progressContainer.appendChild(progressItem);

                try {
                    // PDF í˜ì´ì§€ ìˆ˜ í™•ì¸
                    const arrayBuffer = await file.arrayBuffer();
                    const pdf = await pdfjsLib.getDocument({ data: arrayBuffer }).promise;
                    const numPages = pdf.numPages;

                    // í˜ì´ì§€ê°€ ë„ˆë¬´ ë§ìœ¼ë©´ ê²½ê³ 
                    if (numPages >= 100) {
                        const shouldContinue = await new Promise(resolve => {
                            showModal(
                                currentLang === 'ko' ? 'âš ï¸ í˜ì´ì§€ê°€ ë„ˆë¬´ ë§ìŠµë‹ˆë‹¤' : 'âš ï¸ Too Many Pages',
                                currentLang === 'ko'
                                    ? `${numPages} í˜ì´ì§€ì…ë‹ˆë‹¤. ë³€í™˜ ì‹œê°„ì´ ì˜¤ë˜ ê±¸ë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\në¨¼ì € PDFë¥¼ ë¶„í• í•˜ì‹œê² ìŠµë‹ˆê¹Œ?`
                                    : `${numPages} pages detected. Conversion may take a long time.\nWould you like to split the PDF first?`,
                                () => {
                                    switchTab('split');
                                    resolve(false);
                                },
                                () => resolve(true)
                            );
                        });

                        if (!shouldContinue) {
                            isProcessing = false;
                            document.getElementById('convertBtn').disabled = false;
                            document.getElementById('cancelConvertBtn').classList.add('hidden');
                            return;
                        }
                    }

                    // ë³€í™˜í•  í˜ì´ì§€ ê²°ì •
                    const pagesToConvert = getPageNumbers(pageSelection, numPages);

                    if (pagesToConvert.length === 0) {
                        showToast(currentLang === 'ko' ? 'ìœ íš¨í•œ í˜ì´ì§€ê°€ ì—†ìŠµë‹ˆë‹¤.' : 'No valid pages.', 'error');
                        continue;
                    }

                    // í˜ì´ì§€ë³„ ë³€í™˜
                    const images = [];
                    for (let i = 0; i < pagesToConvert.length; i++) {
                        if (!isProcessing) break;

                        const pageNum = pagesToConvert[i];
                        const page = await pdf.getPage(pageNum);
                        const viewport = page.getViewport({ scale });

                        const canvas = document.createElement('canvas');
                        const context = canvas.getContext('2d');
                        canvas.width = viewport.width;
                        canvas.height = viewport.height;

                        await page.render({
                            canvasContext: context,
                            viewport: viewport
                        }).promise;

                        // ê·¸ë ˆì´ìŠ¤ì¼€ì¼ ë³€í™˜
                        if (grayscale) {
                            const imageData = context.getImageData(0, 0, canvas.width, canvas.height);
                            const data = imageData.data;
                            for (let j = 0; j < data.length; j += 4) {
                                const gray = 0.299 * data[j] + 0.587 * data[j + 1] + 0.114 * data[j + 2];
                                data[j] = data[j + 1] = data[j + 2] = gray;
                            }
                            context.putImageData(imageData, 0, 0);
                        }

                        const blob = await new Promise(resolve => canvas.toBlob(resolve, 'image/jpeg', 0.92));
                        images.push(blob);

                        // ì§„í–‰ë¥  ì—…ë°ì´íŠ¸
                        const progress = Math.round(((i + 1) / pagesToConvert.length) * 100);
                        updateProgress(fileIndex, progress);
                    }

                    allResults.push({
                        filename: sanitizeFilename(file.name),
                        images: images,
                        totalPages: pagesToConvert.length
                    });

                } catch (error) {
                    console.error('Error processing file:', error);
                    showToast(
                        currentLang === 'ko'
                            ? `${file.name} ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜: ${error.message}`
                            : `Error processing ${file.name}: ${error.message}`,
                        'error'
                    );
                }
            }

            // ë‹¤ìš´ë¡œë“œ
            if (allResults.length > 0 && isProcessing) {
                await downloadJpegResults(allResults);
            }

            isProcessing = false;
            document.getElementById('convertBtn').disabled = false;
            document.getElementById('cancelConvertBtn').classList.add('hidden');
        }

        function getPageNumbers(selection, totalPages) {
            if (selection === 'all') {
                return Array.from({ length: totalPages }, (_, i) => i + 1);
            }

            if (selection === 'range') {
                const input = document.getElementById('rangeInput').value.trim();
                const match = input.match(/^(\d+)-(\d+)$/);
                if (!match) return [];
                const start = parseInt(match[1]);
                const end = parseInt(match[2]);
                if (start < 1 || end > totalPages || start > end) return [];
                return Array.from({ length: end - start + 1 }, (_, i) => start + i);
            }

            if (selection === 'specific') {
                const input = document.getElementById('specificInput').value.trim();
                const pages = new Set();
                const parts = input.split(',');

                for (const part of parts) {
                    const trimmed = part.trim();
                    if (trimmed.includes('-')) {
                        const [start, end] = trimmed.split('-').map(n => parseInt(n.trim()));
                        if (start && end && start <= end) {
                            for (let i = start; i <= end; i++) {
                                if (i >= 1 && i <= totalPages) pages.add(i);
                            }
                        }
                    } else {
                        const num = parseInt(trimmed);
                        if (num >= 1 && num <= totalPages) pages.add(num);
                    }
                }

                return Array.from(pages).sort((a, b) => a - b);
            }

            return [];
        }

        function updateProgress(fileIndex, percent) {
            const progressBar = document.querySelector(`[data-progress="${fileIndex}"]`);
            const progressStatus = document.querySelector(`[data-status="${fileIndex}"]`);

            if (progressBar) progressBar.style.width = percent + '%';
            if (progressStatus) progressStatus.textContent = percent + '%';
        }

        async function downloadJpegResults(results) {
            const timestamp = getTimestamp();

            // ì´ ì´ë¯¸ì§€ ìˆ˜ ê³„ì‚°
            const totalImages = results.reduce((sum, r) => sum + r.images.length, 0);

            if (totalImages <= 5) {
                // 5ì¥ ì´í•˜: ê°œë³„ ë‹¤ìš´ë¡œë“œ + ZIP ì˜µì…˜
                for (const result of results) {
                    for (let i = 0; i < result.images.length; i++) {
                        const filename = `${timestamp}_${result.filename}_${i + 1}_of_${result.totalPages}.jpg`;
                        downloadBlob(result.images[i], filename);
                    }
                }
                showToast(
                    currentLang === 'ko'
                        ? `ë³€í™˜ ì™„ë£Œ! ${totalImages}ê°œ ì´ë¯¸ì§€ê°€ ë‹¤ìš´ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤.`
                        : `Complete! ${totalImages} images downloaded.`,
                    'success'
                );
            } else {
                // 6ì¥ ì´ìƒ: ZIPë§Œ
                const zip = new JSZip();

                for (const result of results) {
                    for (let i = 0; i < result.images.length; i++) {
                        const filename = `${timestamp}_${result.filename}_${i + 1}_of_${result.totalPages}.jpg`;
                        zip.file(filename, result.images[i]);
                    }
                }

                const zipBlob = await zip.generateAsync({ type: 'blob' });
                downloadBlob(zipBlob, `${timestamp}_converted_images.zip`);

                showToast(
                    currentLang === 'ko'
                        ? `ë³€í™˜ ì™„ë£Œ! ZIP íŒŒì¼ë¡œ ë‹¤ìš´ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤.`
                        : `Complete! Downloaded as ZIP file.`,
                    'success'
                );
            }
        }

        function downloadBlob(blob, filename) {
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        function cancelConversion() {
            isProcessing = false;
            document.getElementById('cancelConvertBtn').classList.add('hidden');
            showToast(currentLang === 'ko' ? 'ë³€í™˜ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.' : 'Conversion cancelled.', 'warning');
        }

        // Split íƒ­ ì„¤ì •
        function setupSplitTab() {
            const uploadArea = document.getElementById('splitUploadArea');
            const fileInput = document.getElementById('splitFileInput');
            const fileInfo = document.getElementById('splitFileInfo');
            const options = document.getElementById('splitOptions');
            const splitBtn = document.getElementById('splitBtn');
            const cancelBtn = document.getElementById('cancelSplitBtn');

            uploadArea.addEventListener('click', () => fileInput.click());

            uploadArea.addEventListener('dragover', (e) => {
                e.preventDefault();
                uploadArea.classList.add('drag-over');
            });

            uploadArea.addEventListener('dragleave', () => {
                uploadArea.classList.remove('drag-over');
            });

            uploadArea.addEventListener('drop', (e) => {
                e.preventDefault();
                uploadArea.classList.remove('drag-over');
                const files = Array.from(e.dataTransfer.files);
                if (files.length > 0) handleSplitFile(files[0]);
            });

            fileInput.addEventListener('change', (e) => {
                if (e.target.files.length > 0) handleSplitFile(e.target.files[0]);
            });

            // ë¶„í•  ë°©ì‹ ë¼ë””ì˜¤ ë²„íŠ¼
            document.querySelectorAll('input[name="splitMethod"]').forEach(radio => {
                radio.addEventListener('change', () => {
                    document.getElementById('equalParts').disabled = radio.value !== 'equal';
                    document.getElementById('pagesPerSplit').disabled = radio.value !== 'pages';
                    document.getElementById('splitRanges').disabled = radio.value !== 'range';
                });
            });

            splitBtn.addEventListener('click', splitPdf);
            cancelBtn.addEventListener('click', cancelSplit);
        }

        function handleSplitFile(file) {
            if (file.type !== 'application/pdf') {
                showToast(currentLang === 'ko' ? 'PDF íŒŒì¼ë§Œ ì—…ë¡œë“œ ê°€ëŠ¥í•©ë‹ˆë‹¤.' : 'Only PDF files allowed.', 'error');
                return;
            }

            if (file.size > 20 * 1024 * 1024) {
                showToast(currentLang === 'ko' ? 'íŒŒì¼ í¬ê¸°ê°€ 20MBë¥¼ ì´ˆê³¼í•©ë‹ˆë‹¤.' : 'File exceeds 20MB.', 'error');
                return;
            }

            splitFile = file;
            displaySplitFile();
        }

        function displaySplitFile() {
            const fileInfo = document.getElementById('splitFileInfo');
            const options = document.getElementById('splitOptions');

            if (!splitFile) {
                fileInfo.classList.add('hidden');
                options.classList.add('hidden');
                return;
            }

            fileInfo.classList.remove('hidden');
            options.classList.remove('hidden');

            fileInfo.innerHTML = `
                <div class="file-item">
                    <div class="file-info">
                        <h4>${splitFile.name}</h4>
                        <p>${formatBytes(splitFile.size)}</p>
                    </div>
                    <button class="file-remove" onclick="removeSplitFile()">Ã—</button>
                </div>
            `;
        }

        function removeSplitFile() {
            splitFile = null;
            displaySplitFile();
        }

        async function splitPdf() {
            if (isProcessing || !splitFile) return;

            isProcessing = true;
            document.getElementById('splitBtn').disabled = true;
            document.getElementById('cancelSplitBtn').classList.remove('hidden');

            const progressContainer = document.getElementById('splitProgress');
            progressContainer.classList.remove('hidden');
            progressContainer.innerHTML = `
                <div class="progress-item">
                    <div class="progress-header">
                        <span class="progress-filename">${splitFile.name}</span>
                        <span class="progress-status" id="splitStatus">0%</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="splitProgressBar" style="width: 0%"></div>
                    </div>
                </div>
            `;

            try {
                const arrayBuffer = await splitFile.arrayBuffer();
                const pdfDoc = await PDFLib.PDFDocument.load(arrayBuffer);
                const totalPages = pdfDoc.getPageCount();

                const splitMethod = document.querySelector('input[name="splitMethod"]:checked').value;
                const splits = calculateSplits(splitMethod, totalPages);

                if (splits.length === 0) {
                    showToast(currentLang === 'ko' ? 'ìœ íš¨í•œ ë¶„í•  ë²”ìœ„ê°€ ì—†ìŠµë‹ˆë‹¤.' : 'No valid split ranges.', 'error');
                    isProcessing = false;
                    document.getElementById('splitBtn').disabled = false;
                    document.getElementById('cancelSplitBtn').classList.add('hidden');
                    return;
                }

                const timestamp = getTimestamp();
                const baseName = sanitizeFilename(splitFile.name);
                const resultPdfs = [];

                for (let i = 0; i < splits.length; i++) {
                    if (!isProcessing) break;

                    const [start, end] = splits[i];
                    const newPdf = await PDFLib.PDFDocument.create();

                    for (let pageNum = start - 1; pageNum < end; pageNum++) {
                        const [copiedPage] = await newPdf.copyPages(pdfDoc, [pageNum]);
                        newPdf.addPage(copiedPage);
                    }

                    const pdfBytes = await newPdf.save();
                    const blob = new Blob([pdfBytes], { type: 'application/pdf' });
                    resultPdfs.push(blob);

                    // ì§„í–‰ë¥  ì—…ë°ì´íŠ¸
                    const progress = Math.round(((i + 1) / splits.length) * 100);
                    document.getElementById('splitProgressBar').style.width = progress + '%';
                    document.getElementById('splitStatus').textContent = progress + '%';
                }

                // ë‹¤ìš´ë¡œë“œ
                if (resultPdfs.length > 0 && isProcessing) {
                    const zip = new JSZip();
                    for (let i = 0; i < resultPdfs.length; i++) {
                        const filename = `${timestamp}_${baseName}_${i + 1}_of_${resultPdfs.length}.pdf`;
                        zip.file(filename, resultPdfs[i]);
                    }

                    const zipBlob = await zip.generateAsync({ type: 'blob' });
                    downloadBlob(zipBlob, `${timestamp}_${baseName}.zip`);

                    showToast(
                        currentLang === 'ko'
                            ? `ë¶„í•  ì™„ë£Œ! ${resultPdfs.length}ê°œ íŒŒì¼ì´ ZIPìœ¼ë¡œ ë‹¤ìš´ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤.`
                            : `Complete! ${resultPdfs.length} files downloaded as ZIP.`,
                        'success'
                    );
                }

            } catch (error) {
                console.error('Error splitting PDF:', error);
                showToast(
                    currentLang === 'ko'
                        ? `PDF ë¶„í•  ì¤‘ ì˜¤ë¥˜: ${error.message}`
                        : `Error splitting PDF: ${error.message}`,
                    'error'
                );
            }

            isProcessing = false;
            document.getElementById('splitBtn').disabled = false;
            document.getElementById('cancelSplitBtn').classList.add('hidden');
        }

        function calculateSplits(method, totalPages) {
            const splits = [];

            if (method === 'equal') {
                const parts = parseInt(document.getElementById('equalParts').value);
                const pagesPerPart = Math.ceil(totalPages / parts);
                for (let i = 0; i < parts; i++) {
                    const start = i * pagesPerPart + 1;
                    const end = Math.min((i + 1) * pagesPerPart, totalPages);
                    if (start <= totalPages) splits.push([start, end]);
                }
            } else if (method === 'pages') {
                const pagesPerSplit = parseInt(document.getElementById('pagesPerSplit').value);
                for (let i = 0; i < totalPages; i += pagesPerSplit) {
                    splits.push([i + 1, Math.min(i + pagesPerSplit, totalPages)]);
                }
            } else if (method === 'range') {
                const input = document.getElementById('splitRanges').value.trim();
                const ranges = input.split(',');
                for (const range of ranges) {
                    const trimmed = range.trim();
                    const match = trimmed.match(/^(\d+)-(\d+)$/);
                    if (match) {
                        const start = parseInt(match[1]);
                        const end = parseInt(match[2]);
                        if (start >= 1 && end <= totalPages && start <= end) {
                            splits.push([start, end]);
                        }
                    }
                }
            } else if (method === 'all') {
                for (let i = 1; i <= totalPages; i++) {
                    splits.push([i, i]);
                }
            }

            return splits;
        }

        function cancelSplit() {
            isProcessing = false;
            document.getElementById('cancelSplitBtn').classList.add('hidden');
            showToast(currentLang === 'ko' ? 'ë¶„í• ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.' : 'Split cancelled.', 'warning');
        }
    </script>
</body>
</html>
